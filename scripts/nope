#!
while true
    sleep 0.2 # When the file is created the permissions may not be set up, so wait.
    set file (inotifywait -e create . | sed -r 's/^.*CREATE(,ISDIR)*\s+(.*)$/\2/ig')
    set type (file $file | sed 's/^.*: //')
    [ "$type" = "directory" ] && cd $file && exit
    [ "$type" = "" ] && continue 
    [ "$type" = "directory" ] || xdg-open $file && exit
end
exit
